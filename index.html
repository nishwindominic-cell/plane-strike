<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Plane Strike Landing</title>
    <link rel="stylesheet" href="./assets/css/game.css">
    <link rel="stylesheet" href="./assets/css/media-query.css">
</head>

<body>
    <!-- Loading Page -->
    <div id="loading-page">
        <div class="loading-content">
            <h1>Plane Strike Landing</h1>
            <div class="loading-spinner"></div>
            <p>Loading game assets...</p>
        </div>
    </div>

    <div id="home-menu">
        <!-- Settings button on home page -->
        <div id="settings-btn" onclick="openSettings()">
            <span>‚öôÔ∏è</span> SETTINGS
        </div>

        <h1>Plane Strike Landing</h1>
        <p>ARROWS to Fly | SPACE to Shoot | G for Landing Gear | M for Missile<br><b>Objective:</b> Eliminate ALL
            hostiles before landing on the runway.</p>
        <div style="display: flex; gap: 20px; justify-content: center;">
            <button class="menu-btn" onclick="startGame()">NEW GAME</button>
            <button id="continue-btn" class="menu-btn" onclick="continueGame()"
                style="background: #fbbf24;">CONTINUE</button>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settings-panel">
        <h2>‚öôÔ∏è SETTINGS</h2>

        <div class="setting-item">
            <span class="setting-label">Sound Effects</span>
            <div class="setting-toggle active" id="sound-toggle" onclick="toggleSound()"></div>
        </div>

        <div class="setting-item">
            <span class="setting-label">Music Volume</span>
            <input type="range" min="0" max="100" value="70" class="setting-slider" id="music-volume"
                oninput="updateVolume(this.value)">
        </div>

        <div class="setting-item">
            <span class="setting-label">SFX Volume</span>
            <input type="range" min="0" max="100" value="80" class="setting-slider" id="sfx-volume"
                oninput="updateSFXVolume(this.value)">
        </div>

        <div class="setting-item">
            <span class="setting-label">Control Sensitivity</span>
            <span class="setting-value" id="sensitivity-value" onclick="cycleSensitivity()">Normal</span>
        </div>

        <div class="setting-item">
            <span class="setting-label">Difficulty</span>
            <span class="setting-value" id="difficulty-value" onclick="cycleDifficulty()">Normal</span>
        </div>

        <button class="close-settings" onclick="closeSettings()">CLOSE SETTINGS</button>
    </div>

    <!-- NEW: Level and Stage Display -->
    <div id="level-stage">üåç LEVEL 1 | STAGE 1/5</div>

    <!-- NEW: Coin Display (Top Left) -->
    <div id="coin-display">üí∞ 0</div>

    <!-- NEW: Shop Button (Bottom Left) -->
    <div id="shop-btn" onclick="openPowerShop()">üõí POWER SHOP</div>

    <!-- NEW: Boss Warning -->
    <div id="boss-warning">‚ö†Ô∏è BOSS INCOMING ‚ö†Ô∏è</div>

    <!-- NEW: Boss Health Bar -->
    <div id="boss-health-container">
        <div id="boss-health-fill"></div>
        <div id="boss-health-text">BOSS HEALTH 100%</div>
    </div>

    <!-- NEW: Stage Complete Menu -->
    <div id="stage-complete-menu">
        <h2>STAGE COMPLETE! üéâ</h2>
        <p id="stage-complete-text">Stage 1 Complete</p>
        <div class="health-restore">‚ù§Ô∏è HEALTH FULLY RESTORED</div>
        <div class="health-restore" style="color: #fbbf24;">üí∞ +50 COINS</div>
        <p>Prepare for next stage</p>
        <button class="stage-btn" onclick="continueToNextStage()">CONTINUE TO STAGE <span
                id="next-stage-number">2</span></button>
        <button class="stage-btn secondary" onclick="returnToHome()">RETURN TO MENU</button>
    </div>

    <!-- NEW: Power Shop Menu -->
    <div id="power-shop-menu">
        <h2>üõí POWER SHOP</h2>
        <div id="shop-coins">üí∞ <span id="shop-coins-amount">0</span></div>
        <div class="shop-items" id="shop-items-container">
            <!-- Shop items will be dynamically generated -->
        </div>
        <button class="shop-close" onclick="closePowerShop()">CLOSE SHOP</button>
    </div>

    <div id="hud">
        <div style="text-align:center; color:#fbbf24; margin-bottom:5px; font-size:1.2em;">MISSION LEVEL <span
                id="lvl">1</span></div>
        <div id="lives-container">LIVES: <span id="lives-val">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
        <hr style="border:0; border-top:1px solid #14532d; margin:10px 0;">
        <div class="stat-row"><span class="label">Hostiles Left:</span><span class="value" id="enmCount">0</span></div>
        <div class="stat-row"><span class="label">Speed:</span><span class="value"><span id="spd">0</span> KN</span>
        </div>
        <div class="stat-row"><span class="label">Sink Rate:</span><span class="value" id="sink-container"><span
                    id="sink">0</span> FPM</span></div>
        <div class="stat-row"><span class="label">Altitude:</span><span class="value"><span id="alt">0</span> FT</span>
        </div>
        <div class="stat-row"><span class="label">Engine:</span><span id="p-eng" class="value">OK</span></div>
        <div class="stat-row"><span class="label">Health:</span><span id="p-health" class="value">50%</span></div>
        <div class="stat-row"><span class="label">Gear:</span><span id="gearStat" class="value">UP</span></div>
        <div class="stat-row"><span class="label">Power:</span><span id="powerStat" class="value">NONE</span></div>
    </div>
    <div id="gs-container" style="display:none;">
        <div style="position:absolute;top:0;">HIGH</div>
        <div id="gs-diamond" class="diamond"></div>
        <div style="position:absolute;bottom:0;">LOW</div>
        <div style="width:10px;height:2px;background:#22c55e;position:absolute;top:50%;"></div>
        <div style="position:absolute;right:-35px;transform:rotate(-90deg);white-space:nowrap;">G-SLOPE</div>
    </div>
    <div id="loc-container" style="display:none;">
        <div style="position:absolute;left:0;">L</div>
        <div id="loc-diamond" class="diamond"></div>
        <div style="position:absolute;right:0;">R</div>
        <div style="width:2px;height:10px;background:#22c55e;position:absolute;left:50%;"></div>
        <div style="position:absolute;bottom:-15px;">LOCALIZER</div>
    </div>
    <div id="success-menu">
        <h2 id="success-title">LANDED SUCCESSFULLY</h2>
        <p id="success-stats">All systems repaired and refueled.</p>
        <button id="next-btn" class="menu-btn" onclick="nextLevel()">NEXT MISSION</button>
        <button class="menu-btn retry" onclick="retryLevel()">RESTART LEVEL</button>
    </div>
    <div id="radar-container"></div>

    <!-- ===== ENHANCED HORIZONTAL MOBILE CONTROLS ===== -->
    <div id="mobile-controls">
        <div class="horizontal-controls">
            <!-- Left side - Flight controls (Pitch Up/Down) -->
            <div class="control-group">
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn" ontouchstart="keyDown('ArrowUp'); event.preventDefault();" ontouchend="keyUp('ArrowUp'); event.preventDefault();"
                        onmousedown="keyDown('ArrowUp')" onmouseup="keyUp('ArrowUp')" onmouseleave="keyUp('ArrowUp')">‚¨ÜÔ∏è
                    </div>
                    <div class="control-label">Pitch Up</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn" ontouchstart="keyDown('ArrowDown'); event.preventDefault();" ontouchend="keyUp('ArrowDown'); event.preventDefault();"
                        onmousedown="keyDown('ArrowDown')" onmouseup="keyUp('ArrowDown')"
                        onmouseleave="keyUp('ArrowDown')">‚¨áÔ∏è</div>
                    <div class="control-label">Pitch Down</div>
                </div>
            </div>

            <!-- Middle - Throttle controls (Speed +/-) -->
            <div class="control-group">
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn" ontouchstart="keyDown('ArrowLeft'); event.preventDefault();" ontouchend="keyUp('ArrowLeft'); event.preventDefault();"
                        onmousedown="keyDown('ArrowLeft')" onmouseup="keyUp('ArrowLeft')"
                        onmouseleave="keyUp('ArrowLeft')">‚¨ÖÔ∏è</div>
                    <div class="control-label">Speed -</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn" ontouchstart="keyDown('ArrowRight'); event.preventDefault();" ontouchend="keyUp('ArrowRight'); event.preventDefault();"
                        onmousedown="keyDown('ArrowRight')" onmouseup="keyUp('ArrowRight')"
                        onmouseleave="keyUp('ArrowRight')">‚û°Ô∏è</div>
                    <div class="control-label">Speed +</div>
                </div>
            </div>

            <!-- Right side - Action controls (Gun/Gear/Missile) -->
            <div class="control-group">
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn special" ontouchstart="keyDown('Space'); event.preventDefault();" ontouchend="keyUp('Space'); event.preventDefault();"
                        onmousedown="keyDown('Space')" onmouseup="keyUp('Space')" onmouseleave="keyUp('Space')">üî•</div>
                    <div class="control-label">Gun</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <!-- Fixed: Gear button with proper handlers -->
                    <div class="control-btn special" ontouchstart="keyDown('KeyG'); event.preventDefault();"
                        ontouchend="keyUp('KeyG'); event.preventDefault();" onmousedown="keyDown('KeyG')"
                        onmouseup="keyUp('KeyG')" onmouseleave="keyUp('KeyG')">‚öôÔ∏è</div>
                    <div class="control-label">Gear</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="control-btn special" ontouchstart="keyDown('KeyM'); event.preventDefault();" ontouchend="keyUp('KeyM'); event.preventDefault();"
                        onmousedown="keyDown('KeyM')" onmouseup="keyUp('KeyM')" onmouseleave="keyUp('KeyM')">üöÄ</div>
                    <div class="control-label">Missile</div>
                </div>
            </div>
        </div>
    </div>

    <button id="hud-toggle" onclick="toggleHUD()">üìä</button>
    <canvas id="gameCanvas"></canvas>

    <script src="./assets/script/script.js"></script>
</body>

</html>